import "core-js/stable";
import "regenerator-runtime/runtime";
import { waitForAppScreen, zemu } from './test.fixture';

test('[Nano S] Staking', zemu("nanos", async (sim, lat) => {
  
  const tx = lat.signTransaction(
    "44'/486'/0'/0'/0",
    'f901d72a8502540be4008303345094100000000000000000000000000000000000000280b901b0f901ad838203e8029594c115ceadf9e5923330e5f42903fe7f926dda65d2b842b84077fffc999d9f9403b65009f1eb27bae65774e2d8ea36f7b20a89f82642a5067557430e6edfe5320bb81c3666a19cf4a5172d6533117d7ebcd0f2c8205549905081808e8d6368656e6461692d6e6f646531a3a268747470733a2f2f7777772e706c61746f6e2e6e6574776f726b2f232f696e64657896956368656e6461692d6e6f6465312d64657461696c738b8a152d02c7e14af6800000838203e88483010100b843b841e53bdeebb95edb3bd0e014fe0d0b1b2576bc3a6628e5ab11666b2c374c67c1164a6d7c43dcc8825c93d91d139912ee7fd8755aad96cf1f949194ac887ae25e8a01b862b8605ccd6b8c32f2713faa6c9a46e5fb61ad7b7400e53fabcbc56bdc0c16fbfffe09ad6256982c7059e7383a9187ad93a002a7cda7a75d569f591730481a8b91b5fad52ac26ac495522a069686df1061fc184c31771008c1fedfafd50ae794778811b842b840e3082c0c13943573b30bafd2133fddb1c87ac857666e27e270a57ba2f7c857420bfb8cd9f10dad3dbef71cf7382b2af075101d7da17eee755f28b8bc2802e719648080',
  );

  await waitForAppScreen(sim);

  try {
    await sim.navigateAndCompareSnapshots('.', 'nanos_staking', [16, 0]);
  }catch (e) {
    console.error(e);
  }

  await expect(tx).resolves.toEqual({
    "r": "5269fd445a9cb56700f699e09024e65f978a140139beb6d575cbbdbabd636d78",
    "s": "48c1450d862a888eec62aa26a3998c3a899d892d1793dbef9504b31ff8889c3a",
    "v": "eb",
  });
}));

// test('[Nano X] Approve DAI tokens', zemu("nanox", async (sim, lat) => {

//   const tx = lat.signTransaction(
//     "44'/486'/0'/0'/0",
//     'f901d72a8502540be4008303345094100000000000000000000000000000000000000280b901b0f901ad838203e8029594c115ceadf9e5923330e5f42903fe7f926dda65d2b842b84077fffc999d9f9403b65009f1eb27bae65774e2d8ea36f7b20a89f82642a5067557430e6edfe5320bb81c3666a19cf4a5172d6533117d7ebcd0f2c8205549905081808e8d6368656e6461692d6e6f646531a3a268747470733a2f2f7777772e706c61746f6e2e6e6574776f726b2f232f696e64657896956368656e6461692d6e6f6465312d64657461696c738b8a152d02c7e14af6800000838203e88483010100b843b841e53bdeebb95edb3bd0e014fe0d0b1b2576bc3a6628e5ab11666b2c374c67c1164a6d7c43dcc8825c93d91d139912ee7fd8755aad96cf1f949194ac887ae25e8a01b862b8605ccd6b8c32f2713faa6c9a46e5fb61ad7b7400e53fabcbc56bdc0c16fbfffe09ad6256982c7059e7383a9187ad93a002a7cda7a75d569f591730481a8b91b5fad52ac26ac495522a069686df1061fc184c31771008c1fedfafd50ae794778811b842b840e3082c0c13943573b30bafd2133fddb1c87ac857666e27e270a57ba2f7c857420bfb8cd9f10dad3dbef71cf7382b2af075101d7da17eee755f28b8bc2802e719648080',
//   );

//   await waitForAppScreen(sim);
//   await sim.navigateAndCompareSnapshots('.', 'nanox_approve_dai_tokens', [5, 0]);

//   await expect(tx).resolves.toEqual({
//     "r": "5269fd445a9cb56700f699e09024e65f978a140139beb6d575cbbdbabd636d78",
//     "s": "48c1450d862a888eec62aa26a3998c3a899d892d1793dbef9504b31ff8889c3a",
//     "v": "eb",
//   });
// }));
